<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Regression Model</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/lumen.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-2.5.1/plotly-latest.min.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="Data-Preparation.html">Data Preparation</a>
</li>
<li>
  <a href="analysis.html">Descriptive Analysis</a>
</li>
<li>
  <a href="ModelAnalysis2.html">Statistical Analysis</a>
</li>
<li>
  <a href="model.html">Regression Model</a>
</li>
<li>
  <a href="https://ym2813.shinyapps.io/interactive_map_p8105_final/">Interactive Map</a>
</li>
<li>
  <a href="report.html">Report</a>
</li>
<li>
  <a href="https://www.youtube.com/">
    <span class="fa fa-youtube fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/P8105Final/P8015_Final_Project">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Regression Model</h1>

</div>


<div id="goal" class="section level1">
<h1>Goal</h1>
<p>In this section the goal is to apply the time series analysis to fit a model to predict future New York shooting occurrences in one month. We will use the data from New York police department and count the shooting events for each month from Jan 2006 to Dec 2020.</p>
<p>We want to use the SARIMA model to fit the seasonal pattern of the shooting occurrences plus forecast the future monthly occurrences. Model selection and diagnostic will be performed to obtain a good quality model.</p>
<p>We are also interested about whether the COVID affects the shooting patterns. So we use the 2006 - 2018 data as the training set, and 2019-2020 data as the test set to compare with the prediction of the SARIMA model.</p>
</div>
<div id="data-visualization" class="section level1">
<h1>Data visualization</h1>
<p>First we make a time series plot about the data and try to observe the trend, variability and the seasonality.</p>
<div id="htmlwidget-e55eba0eadfa2596f7b4" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-e55eba0eadfa2596f7b4">{"x":{"data":[{"x":[2006,2006.08333333333,2006.16666666667,2006.25,2006.33333333333,2006.41666666667,2006.5,2006.58333333333,2006.66666666667,2006.75,2006.83333333333,2006.91666666667,2007,2007.08333333333,2007.16666666667,2007.25,2007.33333333333,2007.41666666667,2007.5,2007.58333333333,2007.66666666667,2007.75,2007.83333333333,2007.91666666667,2008,2008.08333333333,2008.16666666667,2008.25,2008.33333333333,2008.41666666667,2008.5,2008.58333333333,2008.66666666667,2008.75,2008.83333333333,2008.91666666667,2009,2009.08333333333,2009.16666666667,2009.25,2009.33333333333,2009.41666666667,2009.5,2009.58333333333,2009.66666666667,2009.75,2009.83333333333,2009.91666666667,2010,2010.08333333333,2010.16666666667,2010.25,2010.33333333333,2010.41666666667,2010.5,2010.58333333333,2010.66666666667,2010.75,2010.83333333333,2010.91666666667,2011,2011.08333333333,2011.16666666667,2011.25,2011.33333333333,2011.41666666667,2011.5,2011.58333333333,2011.66666666667,2011.75,2011.83333333333,2011.91666666667,2012,2012.08333333333,2012.16666666667,2012.25,2012.33333333333,2012.41666666667,2012.5,2012.58333333333,2012.66666666667,2012.75,2012.83333333333,2012.91666666667,2013,2013.08333333333,2013.16666666667,2013.25,2013.33333333333,2013.41666666667,2013.5,2013.58333333333,2013.66666666667,2013.75,2013.83333333333,2013.91666666667,2014,2014.08333333333,2014.16666666667,2014.25,2014.33333333333,2014.41666666667,2014.5,2014.58333333333,2014.66666666667,2014.75,2014.83333333333,2014.91666666667,2015,2015.08333333333,2015.16666666667,2015.25,2015.33333333333,2015.41666666667,2015.5,2015.58333333333,2015.66666666667,2015.75,2015.83333333333,2015.91666666667,2016,2016.08333333333,2016.16666666667,2016.25,2016.33333333333,2016.41666666667,2016.5,2016.58333333333,2016.66666666667,2016.75,2016.83333333333,2016.91666666667,2017,2017.08333333333,2017.16666666667,2017.25,2017.33333333333,2017.41666666667,2017.5,2017.58333333333,2017.66666666667,2017.75,2017.83333333333,2017.91666666667,2018,2018.08333333333,2018.16666666667,2018.25,2018.33333333333,2018.41666666667,2018.5,2018.58333333333,2018.66666666667,2018.75,2018.83333333333,2018.91666666667,2019,2019.08333333333,2019.16666666667,2019.25,2019.33333333333,2019.41666666667,2019.5,2019.58333333333,2019.66666666667,2019.75,2019.83333333333,2019.91666666667,2020,2020.08333333333,2020.16666666667,2020.25,2020.33333333333,2020.41666666667,2020.5,2020.58333333333,2020.66666666667,2020.75,2020.83333333333,2020.91666666667],"y":[129,97,102,156,173,180,233,245,196,199,167,178,109,78,103,117,199,201,239,212,173,197,135,124,114,80,128,153,194,197,234,215,197,153,130,164,105,113,104,136,172,182,211,210,167,143,161,124,97,123,132,167,166,219,211,203,182,144,140,128,102,98,89,136,176,178,221,217,250,188,133,151,114,101,130,127,173,183,247,191,140,113,98,100,119,66,85,94,99,139,141,162,120,125,98,91,107,52,109,98,129,153,161,169,109,130,107,140,117,68,93,106,181,135,132,162,115,103,104,118,79,74,79,72,108,116,112,184,128,105,77,74,68,48,56,81,88,113,104,96,90,89,61,76,88,41,56,68,98,90,114,92,82,83,71,75,63,59,65,67,81,107,120,105,86,80,71,63,94,51,71,69,137,265,325,311,189,165,139,132],"text":["x: 2006.000<br />y: 129","x: 2006.083<br />y:  97","x: 2006.167<br />y: 102","x: 2006.250<br />y: 156","x: 2006.333<br />y: 173","x: 2006.417<br />y: 180","x: 2006.500<br />y: 233","x: 2006.583<br />y: 245","x: 2006.667<br />y: 196","x: 2006.750<br />y: 199","x: 2006.833<br />y: 167","x: 2006.917<br />y: 178","x: 2007.000<br />y: 109","x: 2007.083<br />y:  78","x: 2007.167<br />y: 103","x: 2007.250<br />y: 117","x: 2007.333<br />y: 199","x: 2007.417<br />y: 201","x: 2007.500<br />y: 239","x: 2007.583<br />y: 212","x: 2007.667<br />y: 173","x: 2007.750<br />y: 197","x: 2007.833<br />y: 135","x: 2007.917<br />y: 124","x: 2008.000<br />y: 114","x: 2008.083<br />y:  80","x: 2008.167<br />y: 128","x: 2008.250<br />y: 153","x: 2008.333<br />y: 194","x: 2008.417<br />y: 197","x: 2008.500<br />y: 234","x: 2008.583<br />y: 215","x: 2008.667<br />y: 197","x: 2008.750<br />y: 153","x: 2008.833<br />y: 130","x: 2008.917<br />y: 164","x: 2009.000<br />y: 105","x: 2009.083<br />y: 113","x: 2009.167<br />y: 104","x: 2009.250<br />y: 136","x: 2009.333<br />y: 172","x: 2009.417<br />y: 182","x: 2009.500<br />y: 211","x: 2009.583<br />y: 210","x: 2009.667<br />y: 167","x: 2009.750<br />y: 143","x: 2009.833<br />y: 161","x: 2009.917<br />y: 124","x: 2010.000<br />y:  97","x: 2010.083<br />y: 123","x: 2010.167<br />y: 132","x: 2010.250<br />y: 167","x: 2010.333<br />y: 166","x: 2010.417<br />y: 219","x: 2010.500<br />y: 211","x: 2010.583<br />y: 203","x: 2010.667<br />y: 182","x: 2010.750<br />y: 144","x: 2010.833<br />y: 140","x: 2010.917<br />y: 128","x: 2011.000<br />y: 102","x: 2011.083<br />y:  98","x: 2011.167<br />y:  89","x: 2011.250<br />y: 136","x: 2011.333<br />y: 176","x: 2011.417<br />y: 178","x: 2011.500<br />y: 221","x: 2011.583<br />y: 217","x: 2011.667<br />y: 250","x: 2011.750<br />y: 188","x: 2011.833<br />y: 133","x: 2011.917<br />y: 151","x: 2012.000<br />y: 114","x: 2012.083<br />y: 101","x: 2012.167<br />y: 130","x: 2012.250<br />y: 127","x: 2012.333<br />y: 173","x: 2012.417<br />y: 183","x: 2012.500<br />y: 247","x: 2012.583<br />y: 191","x: 2012.667<br />y: 140","x: 2012.750<br />y: 113","x: 2012.833<br />y:  98","x: 2012.917<br />y: 100","x: 2013.000<br />y: 119","x: 2013.083<br />y:  66","x: 2013.167<br />y:  85","x: 2013.250<br />y:  94","x: 2013.333<br />y:  99","x: 2013.417<br />y: 139","x: 2013.500<br />y: 141","x: 2013.583<br />y: 162","x: 2013.667<br />y: 120","x: 2013.750<br />y: 125","x: 2013.833<br />y:  98","x: 2013.917<br />y:  91","x: 2014.000<br />y: 107","x: 2014.083<br />y:  52","x: 2014.167<br />y: 109","x: 2014.250<br />y:  98","x: 2014.333<br />y: 129","x: 2014.417<br />y: 153","x: 2014.500<br />y: 161","x: 2014.583<br />y: 169","x: 2014.667<br />y: 109","x: 2014.750<br />y: 130","x: 2014.833<br />y: 107","x: 2014.917<br />y: 140","x: 2015.000<br />y: 117","x: 2015.083<br />y:  68","x: 2015.167<br />y:  93","x: 2015.250<br />y: 106","x: 2015.333<br />y: 181","x: 2015.417<br />y: 135","x: 2015.500<br />y: 132","x: 2015.583<br />y: 162","x: 2015.667<br />y: 115","x: 2015.750<br />y: 103","x: 2015.833<br />y: 104","x: 2015.917<br />y: 118","x: 2016.000<br />y:  79","x: 2016.083<br />y:  74","x: 2016.167<br />y:  79","x: 2016.250<br />y:  72","x: 2016.333<br />y: 108","x: 2016.417<br />y: 116","x: 2016.500<br />y: 112","x: 2016.583<br />y: 184","x: 2016.667<br />y: 128","x: 2016.750<br />y: 105","x: 2016.833<br />y:  77","x: 2016.917<br />y:  74","x: 2017.000<br />y:  68","x: 2017.083<br />y:  48","x: 2017.167<br />y:  56","x: 2017.250<br />y:  81","x: 2017.333<br />y:  88","x: 2017.417<br />y: 113","x: 2017.500<br />y: 104","x: 2017.583<br />y:  96","x: 2017.667<br />y:  90","x: 2017.750<br />y:  89","x: 2017.833<br />y:  61","x: 2017.917<br />y:  76","x: 2018.000<br />y:  88","x: 2018.083<br />y:  41","x: 2018.167<br />y:  56","x: 2018.250<br />y:  68","x: 2018.333<br />y:  98","x: 2018.417<br />y:  90","x: 2018.500<br />y: 114","x: 2018.583<br />y:  92","x: 2018.667<br />y:  82","x: 2018.750<br />y:  83","x: 2018.833<br />y:  71","x: 2018.917<br />y:  75","x: 2019.000<br />y:  63","x: 2019.083<br />y:  59","x: 2019.167<br />y:  65","x: 2019.250<br />y:  67","x: 2019.333<br />y:  81","x: 2019.417<br />y: 107","x: 2019.500<br />y: 120","x: 2019.583<br />y: 105","x: 2019.667<br />y:  86","x: 2019.750<br />y:  80","x: 2019.833<br />y:  71","x: 2019.917<br />y:  63","x: 2020.000<br />y:  94","x: 2020.083<br />y:  51","x: 2020.167<br />y:  71","x: 2020.250<br />y:  69","x: 2020.333<br />y: 137","x: 2020.417<br />y: 265","x: 2020.500<br />y: 325","x: 2020.583<br />y: 311","x: 2020.667<br />y: 189","x: 2020.750<br />y: 165","x: 2020.833<br />y: 139","x: 2020.917<br />y: 132"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":40.1826484018265,"l":43.1050228310502},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"<b> Shoooting in New York 2006-2020 <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[2005.25416666667,2021.6625],"tickmode":"array","ticktext":["2010","2015","2020"],"tickvals":[2010,2015,2020],"categoryorder":"array","categoryarray":["2010","2015","2020"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"Time","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[26.8,339.2],"tickmode":"array","ticktext":["100","200","300"],"tickvals":[100,200,300],"categoryorder":"array","categoryarray":["100","200","300"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"Shoots","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"62a429cb9133":{"x":{},"y":{},"type":"scatter"}},"cur_data":"62a429cb9133","visdat":{"62a429cb9133":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>From this plot we can observe:</p>
<ol style="list-style-type: decimal">
<li><p>For the trend, the average shooting events is actually decreasing overtime, except the last year 2020, after COVID outbreak, there was a huge spike of occurrences.</p></li>
<li><p>For the variation, it seems except the last year, the variation tends to decrease.</p></li>
<li><p>For the seasonality, there is a very significant seasonality that in winter there are less shootings and in summer there are more. Probably because winter people will not go out so much compared to summer.</p></li>
</ol>
<p>Also we can check the seasonality by plot each years data by different colors. From the plot below there is a clear spike in summer for all of the years.</p>
<div id="htmlwidget-1926a110b60451e05c12" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-1926a110b60451e05c12">{"x":{"data":[{"x":[0,0.0833333333333333,0.166666666666667,0.25,0.333333333333333,0.416666666666667,0.5,0.583333333333333,0.666666666666667,0.75,0.833333333333333,0.916666666666667],"y":[129,97,102,156,173,180,233,245,196,199,167,178],"text":["time: 0.00000000<br />y: 129","time: 0.08333333<br />y:  97","time: 0.16666667<br />y: 102","time: 0.25000000<br />y: 156","time: 0.33333333<br />y: 173","time: 0.41666667<br />y: 180","time: 0.50000000<br />y: 233","time: 0.58333333<br />y: 245","time: 0.66666667<br />y: 196","time: 0.75000000<br />y: 199","time: 0.83333333<br />y: 167","time: 0.91666667<br />y: 178"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(68,1,84,1)","dash":"solid"},"hoveron":"points","name":"2006","legendgroup":"2006","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0,0.0833333333333333,0.166666666666667,0.25,0.333333333333333,0.416666666666667,0.5,0.583333333333333,0.666666666666667,0.75,0.833333333333333,0.916666666666667],"y":[109,78,103,117,199,201,239,212,173,197,135,124],"text":["time: 0.00000000<br />y: 109","time: 0.08333333<br />y:  78","time: 0.16666667<br />y: 103","time: 0.25000000<br />y: 117","time: 0.33333333<br />y: 199","time: 0.41666667<br />y: 201","time: 0.50000000<br />y: 239","time: 0.58333333<br />y: 212","time: 0.66666667<br />y: 173","time: 0.75000000<br />y: 197","time: 0.83333333<br />y: 135","time: 0.91666667<br />y: 124"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(72,27,109,1)","dash":"solid"},"hoveron":"points","name":"2007","legendgroup":"2007","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0,0.0833333333333333,0.166666666666667,0.25,0.333333333333333,0.416666666666667,0.5,0.583333333333333,0.666666666666667,0.75,0.833333333333333,0.916666666666667],"y":[114,80,128,153,194,197,234,215,197,153,130,164],"text":["time: 0.00000000<br />y: 114","time: 0.08333333<br />y:  80","time: 0.16666667<br />y: 128","time: 0.25000000<br />y: 153","time: 0.33333333<br />y: 194","time: 0.41666667<br />y: 197","time: 0.50000000<br />y: 234","time: 0.58333333<br />y: 215","time: 0.66666667<br />y: 197","time: 0.75000000<br />y: 153","time: 0.83333333<br />y: 130","time: 0.91666667<br />y: 164"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(70,51,126,1)","dash":"solid"},"hoveron":"points","name":"2008","legendgroup":"2008","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0,0.0833333333333333,0.166666666666667,0.25,0.333333333333333,0.416666666666667,0.5,0.583333333333333,0.666666666666667,0.75,0.833333333333333,0.916666666666667],"y":[105,113,104,136,172,182,211,210,167,143,161,124],"text":["time: 0.00000000<br />y: 105","time: 0.08333333<br />y: 113","time: 0.16666667<br />y: 104","time: 0.25000000<br />y: 136","time: 0.33333333<br />y: 172","time: 0.41666667<br />y: 182","time: 0.50000000<br />y: 211","time: 0.58333333<br />y: 210","time: 0.66666667<br />y: 167","time: 0.75000000<br />y: 143","time: 0.83333333<br />y: 161","time: 0.91666667<br />y: 124"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(63,72,137,1)","dash":"solid"},"hoveron":"points","name":"2009","legendgroup":"2009","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0,0.0833333333333333,0.166666666666667,0.25,0.333333333333333,0.416666666666667,0.5,0.583333333333333,0.666666666666667,0.75,0.833333333333333,0.916666666666667],"y":[97,123,132,167,166,219,211,203,182,144,140,128],"text":["time: 0.00000000<br />y:  97","time: 0.08333333<br />y: 123","time: 0.16666667<br />y: 132","time: 0.25000000<br />y: 167","time: 0.33333333<br />y: 166","time: 0.41666667<br />y: 219","time: 0.50000000<br />y: 211","time: 0.58333333<br />y: 203","time: 0.66666667<br />y: 182","time: 0.75000000<br />y: 144","time: 0.83333333<br />y: 140","time: 0.91666667<br />y: 128"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(54,92,141,1)","dash":"solid"},"hoveron":"points","name":"2010","legendgroup":"2010","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0,0.0833333333333333,0.166666666666667,0.25,0.333333333333333,0.416666666666667,0.5,0.583333333333333,0.666666666666667,0.75,0.833333333333333,0.916666666666667],"y":[102,98,89,136,176,178,221,217,250,188,133,151],"text":["time: 0.00000000<br />y: 102","time: 0.08333333<br />y:  98","time: 0.16666667<br />y:  89","time: 0.25000000<br />y: 136","time: 0.33333333<br />y: 176","time: 0.41666667<br />y: 178","time: 0.50000000<br />y: 221","time: 0.58333333<br />y: 217","time: 0.66666667<br />y: 250","time: 0.75000000<br />y: 188","time: 0.83333333<br />y: 133","time: 0.91666667<br />y: 151"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(46,110,142,1)","dash":"solid"},"hoveron":"points","name":"2011","legendgroup":"2011","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0,0.0833333333333333,0.166666666666667,0.25,0.333333333333333,0.416666666666667,0.5,0.583333333333333,0.666666666666667,0.75,0.833333333333333,0.916666666666667],"y":[114,101,130,127,173,183,247,191,140,113,98,100],"text":["time: 0.00000000<br />y: 114","time: 0.08333333<br />y: 101","time: 0.16666667<br />y: 130","time: 0.25000000<br />y: 127","time: 0.33333333<br />y: 173","time: 0.41666667<br />y: 183","time: 0.50000000<br />y: 247","time: 0.58333333<br />y: 191","time: 0.66666667<br />y: 140","time: 0.75000000<br />y: 113","time: 0.83333333<br />y:  98","time: 0.91666667<br />y: 100"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(39,127,142,1)","dash":"solid"},"hoveron":"points","name":"2012","legendgroup":"2012","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0,0.0833333333333333,0.166666666666667,0.25,0.333333333333333,0.416666666666667,0.5,0.583333333333333,0.666666666666667,0.75,0.833333333333333,0.916666666666667],"y":[119,66,85,94,99,139,141,162,120,125,98,91],"text":["time: 0.00000000<br />y: 119","time: 0.08333333<br />y:  66","time: 0.16666667<br />y:  85","time: 0.25000000<br />y:  94","time: 0.33333333<br />y:  99","time: 0.41666667<br />y: 139","time: 0.50000000<br />y: 141","time: 0.58333333<br />y: 162","time: 0.66666667<br />y: 120","time: 0.75000000<br />y: 125","time: 0.83333333<br />y:  98","time: 0.91666667<br />y:  91"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(33,144,140,1)","dash":"solid"},"hoveron":"points","name":"2013","legendgroup":"2013","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0,0.0833333333333333,0.166666666666667,0.25,0.333333333333333,0.416666666666667,0.5,0.583333333333333,0.666666666666667,0.75,0.833333333333333,0.916666666666667],"y":[107,52,109,98,129,153,161,169,109,130,107,140],"text":["time: 0.00000000<br />y: 107","time: 0.08333333<br />y:  52","time: 0.16666667<br />y: 109","time: 0.25000000<br />y:  98","time: 0.33333333<br />y: 129","time: 0.41666667<br />y: 153","time: 0.50000000<br />y: 161","time: 0.58333333<br />y: 169","time: 0.66666667<br />y: 109","time: 0.75000000<br />y: 130","time: 0.83333333<br />y: 107","time: 0.91666667<br />y: 140"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(31,161,135,1)","dash":"solid"},"hoveron":"points","name":"2014","legendgroup":"2014","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0,0.0833333333333333,0.166666666666667,0.25,0.333333333333333,0.416666666666667,0.5,0.583333333333333,0.666666666666667,0.75,0.833333333333333,0.916666666666667],"y":[117,68,93,106,181,135,132,162,115,103,104,118],"text":["time: 0.00000000<br />y: 117","time: 0.08333333<br />y:  68","time: 0.16666667<br />y:  93","time: 0.25000000<br />y: 106","time: 0.33333333<br />y: 181","time: 0.41666667<br />y: 135","time: 0.50000000<br />y: 132","time: 0.58333333<br />y: 162","time: 0.66666667<br />y: 115","time: 0.75000000<br />y: 103","time: 0.83333333<br />y: 104","time: 0.91666667<br />y: 118"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(45,178,125,1)","dash":"solid"},"hoveron":"points","name":"2015","legendgroup":"2015","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0,0.0833333333333333,0.166666666666667,0.25,0.333333333333333,0.416666666666667,0.5,0.583333333333333,0.666666666666667,0.75,0.833333333333333,0.916666666666667],"y":[79,74,79,72,108,116,112,184,128,105,77,74],"text":["time: 0.00000000<br />y:  79","time: 0.08333333<br />y:  74","time: 0.16666667<br />y:  79","time: 0.25000000<br />y:  72","time: 0.33333333<br />y: 108","time: 0.41666667<br />y: 116","time: 0.50000000<br />y: 112","time: 0.58333333<br />y: 184","time: 0.66666667<br />y: 128","time: 0.75000000<br />y: 105","time: 0.83333333<br />y:  77","time: 0.91666667<br />y:  74"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(74,193,109,1)","dash":"solid"},"hoveron":"points","name":"2016","legendgroup":"2016","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0,0.0833333333333333,0.166666666666667,0.25,0.333333333333333,0.416666666666667,0.5,0.583333333333333,0.666666666666667,0.75,0.833333333333333,0.916666666666667],"y":[68,48,56,81,88,113,104,96,90,89,61,76],"text":["time: 0.00000000<br />y:  68","time: 0.08333333<br />y:  48","time: 0.16666667<br />y:  56","time: 0.25000000<br />y:  81","time: 0.33333333<br />y:  88","time: 0.41666667<br />y: 113","time: 0.50000000<br />y: 104","time: 0.58333333<br />y:  96","time: 0.66666667<br />y:  90","time: 0.75000000<br />y:  89","time: 0.83333333<br />y:  61","time: 0.91666667<br />y:  76"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(113,207,87,1)","dash":"solid"},"hoveron":"points","name":"2017","legendgroup":"2017","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0,0.0833333333333333,0.166666666666667,0.25,0.333333333333333,0.416666666666667,0.5,0.583333333333333,0.666666666666667,0.75,0.833333333333333,0.916666666666667],"y":[88,41,56,68,98,90,114,92,82,83,71,75],"text":["time: 0.00000000<br />y:  88","time: 0.08333333<br />y:  41","time: 0.16666667<br />y:  56","time: 0.25000000<br />y:  68","time: 0.33333333<br />y:  98","time: 0.41666667<br />y:  90","time: 0.50000000<br />y: 114","time: 0.58333333<br />y:  92","time: 0.66666667<br />y:  82","time: 0.75000000<br />y:  83","time: 0.83333333<br />y:  71","time: 0.91666667<br />y:  75"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(159,218,58,1)","dash":"solid"},"hoveron":"points","name":"2018","legendgroup":"2018","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0,0.0833333333333333,0.166666666666667,0.25,0.333333333333333,0.416666666666667,0.5,0.583333333333333,0.666666666666667,0.75,0.833333333333333,0.916666666666667],"y":[63,59,65,67,81,107,120,105,86,80,71,63],"text":["time: 0.00000000<br />y:  63","time: 0.08333333<br />y:  59","time: 0.16666667<br />y:  65","time: 0.25000000<br />y:  67","time: 0.33333333<br />y:  81","time: 0.41666667<br />y: 107","time: 0.50000000<br />y: 120","time: 0.58333333<br />y: 105","time: 0.66666667<br />y:  86","time: 0.75000000<br />y:  80","time: 0.83333333<br />y:  71","time: 0.91666667<br />y:  63"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(207,225,28,1)","dash":"solid"},"hoveron":"points","name":"2019","legendgroup":"2019","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0,0.0833333333333333,0.166666666666667,0.25,0.333333333333333,0.416666666666667,0.5,0.583333333333333,0.666666666666667,0.75,0.833333333333333,0.916666666666667],"y":[94,51,71,69,137,265,325,311,189,165,139,132],"text":["time: 0.00000000<br />y:  94","time: 0.08333333<br />y:  51","time: 0.16666667<br />y:  71","time: 0.25000000<br />y:  69","time: 0.33333333<br />y: 137","time: 0.41666667<br />y: 265","time: 0.50000000<br />y: 325","time: 0.58333333<br />y: 311","time: 0.66666667<br />y: 189","time: 0.75000000<br />y: 165","time: 0.83333333<br />y: 139","time: 0.91666667<br />y: 132"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(253,231,37,1)","dash":"solid"},"hoveron":"points","name":"2020","legendgroup":"2020","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.04,0.956666666666667],"y":[129,178],"text":["2006","2006"],"hovertext":["time: -0.0400000<br />y: 129","time:  0.9566667<br />y: 178"],"textfont":{"size":14.6645669291339,"color":"rgba(68,1,84,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"2006","legendgroup":"2006","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.04,0.956666666666667],"y":[109,124],"text":["2007","2007"],"hovertext":["time: -0.0400000<br />y: 109","time:  0.9566667<br />y: 124"],"textfont":{"size":14.6645669291339,"color":"rgba(72,27,109,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"2007","legendgroup":"2007","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.04,0.956666666666667],"y":[114,164],"text":["2008","2008"],"hovertext":["time: -0.0400000<br />y: 114","time:  0.9566667<br />y: 164"],"textfont":{"size":14.6645669291339,"color":"rgba(70,51,126,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"2008","legendgroup":"2008","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.04,0.956666666666667],"y":[105,124],"text":["2009","2009"],"hovertext":["time: -0.0400000<br />y: 105","time:  0.9566667<br />y: 124"],"textfont":{"size":14.6645669291339,"color":"rgba(63,72,137,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"2009","legendgroup":"2009","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.04,0.956666666666667],"y":[97,128],"text":["2010","2010"],"hovertext":["time: -0.0400000<br />y:  97","time:  0.9566667<br />y: 128"],"textfont":{"size":14.6645669291339,"color":"rgba(54,92,141,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"2010","legendgroup":"2010","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.04,0.956666666666667],"y":[102,151],"text":["2011","2011"],"hovertext":["time: -0.0400000<br />y: 102","time:  0.9566667<br />y: 151"],"textfont":{"size":14.6645669291339,"color":"rgba(46,110,142,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"2011","legendgroup":"2011","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.04,0.956666666666667],"y":[114,100],"text":["2012","2012"],"hovertext":["time: -0.0400000<br />y: 114","time:  0.9566667<br />y: 100"],"textfont":{"size":14.6645669291339,"color":"rgba(39,127,142,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"2012","legendgroup":"2012","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.04,0.956666666666667],"y":[119,91],"text":["2013","2013"],"hovertext":["time: -0.0400000<br />y: 119","time:  0.9566667<br />y:  91"],"textfont":{"size":14.6645669291339,"color":"rgba(33,144,140,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"2013","legendgroup":"2013","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.04,0.956666666666667],"y":[107,140],"text":["2014","2014"],"hovertext":["time: -0.0400000<br />y: 107","time:  0.9566667<br />y: 140"],"textfont":{"size":14.6645669291339,"color":"rgba(31,161,135,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"2014","legendgroup":"2014","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.04,0.956666666666667],"y":[117,118],"text":["2015","2015"],"hovertext":["time: -0.0400000<br />y: 117","time:  0.9566667<br />y: 118"],"textfont":{"size":14.6645669291339,"color":"rgba(45,178,125,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"2015","legendgroup":"2015","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.04,0.956666666666667],"y":[79,74],"text":["2016","2016"],"hovertext":["time: -0.0400000<br />y:  79","time:  0.9566667<br />y:  74"],"textfont":{"size":14.6645669291339,"color":"rgba(74,193,109,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"2016","legendgroup":"2016","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.04,0.956666666666667],"y":[68,76],"text":["2017","2017"],"hovertext":["time: -0.0400000<br />y:  68","time:  0.9566667<br />y:  76"],"textfont":{"size":14.6645669291339,"color":"rgba(113,207,87,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"2017","legendgroup":"2017","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.04,0.956666666666667],"y":[88,75],"text":["2018","2018"],"hovertext":["time: -0.0400000<br />y:  88","time:  0.9566667<br />y:  75"],"textfont":{"size":14.6645669291339,"color":"rgba(159,218,58,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"2018","legendgroup":"2018","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.04,0.956666666666667],"y":[63,63],"text":["2019","2019"],"hovertext":["time: -0.0400000<br />y:  63","time:  0.9566667<br />y:  63"],"textfont":{"size":14.6645669291339,"color":"rgba(207,225,28,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"2019","legendgroup":"2019","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[-0.04,0.956666666666667],"y":[94,132],"text":["2020","2020"],"hovertext":["time: -0.0400000<br />y:  94","time:  0.9566667<br />y: 132"],"textfont":{"size":14.6645669291339,"color":"rgba(253,231,37,1)"},"type":"scatter","mode":"text","hoveron":"points","name":"2020","legendgroup":"2020","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":40.1826484018265,"l":43.1050228310502},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"<b> Seasonal Plot: Shoooting in New York 2006-2020 <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.0898333333333333,1.0065],"tickmode":"array","ticktext":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"tickvals":[0,0.0833333333333333,0.166666666666667,0.25,0.333333333333333,0.416666666666667,0.5,0.583333333333333,0.666666666666667,0.75,0.833333333333333,0.916666666666667],"categoryorder":"array","categoryarray":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"Month","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[26.8,339.2],"tickmode":"array","ticktext":["100","200","300"],"tickvals":[100,200,300],"categoryorder":"array","categoryarray":["100","200","300"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"Shoots","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"62a42b3291e2":{"colour":{},"x":{},"y":{},"type":"scatter"},"62a4507a296":{"colour":{},"x":{},"y":{},"label":{}}},"cur_data":"62a42b3291e2","visdat":{"62a42b3291e2":["function (y) ","x"],"62a4507a296":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="data-transformation" class="section level1">
<h1>Data transformation</h1>
<p>Now we need transformation to make the data suitable for fitting the SARIMA model. The SARIMA model assumes the data need to be stationary, without any seasonality trend, and have equal variance.</p>
<p>First we check whether we need to apply a box-cox transformation to stablize the variance.</p>
<p><img src="model_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>As the 95% interval for the best lambda parameter of the box cox transformation does not include 1, so we should use the box cox transformation with lambda = 0.263.</p>
<p>Then to remove the seasonality trend, we apply a log 12 difference. It does not seems very stationary, so we apply additional lag 1 difference. Now it looks quite good and we can proceed to select the model.</p>
<div id="htmlwidget-55f264335ab166c4f089" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-55f264335ab166c4f089">{"x":{"data":[{"x":[2007,2007.08333333333,2007.16666666667,2007.25,2007.33333333333,2007.41666666667,2007.5,2007.58333333333,2007.66666666667,2007.75,2007.83333333333,2007.91666666667,2008,2008.08333333333,2008.16666666667,2008.25,2008.33333333333,2008.41666666667,2008.5,2008.58333333333,2008.66666666667,2008.75,2008.83333333333,2008.91666666667,2009,2009.08333333333,2009.16666666667,2009.25,2009.33333333333,2009.41666666667,2009.5,2009.58333333333,2009.66666666667,2009.75,2009.83333333333,2009.91666666667,2010,2010.08333333333,2010.16666666667,2010.25,2010.33333333333,2010.41666666667,2010.5,2010.58333333333,2010.66666666667,2010.75,2010.83333333333,2010.91666666667,2011,2011.08333333333,2011.16666666667,2011.25,2011.33333333333,2011.41666666667,2011.5,2011.58333333333,2011.66666666667,2011.75,2011.83333333333,2011.91666666667,2012,2012.08333333333,2012.16666666667,2012.25,2012.33333333333,2012.41666666667,2012.5,2012.58333333333,2012.66666666667,2012.75,2012.83333333333,2012.91666666667,2013,2013.08333333333,2013.16666666667,2013.25,2013.33333333333,2013.41666666667,2013.5,2013.58333333333,2013.66666666667,2013.75,2013.83333333333,2013.91666666667,2014,2014.08333333333,2014.16666666667,2014.25,2014.33333333333,2014.41666666667,2014.5,2014.58333333333,2014.66666666667,2014.75,2014.83333333333,2014.91666666667,2015,2015.08333333333,2015.16666666667,2015.25,2015.33333333333,2015.41666666667,2015.5,2015.58333333333,2015.66666666667,2015.75,2015.83333333333,2015.91666666667,2016,2016.08333333333,2016.16666666667,2016.25,2016.33333333333,2016.41666666667,2016.5,2016.58333333333,2016.66666666667,2016.75,2016.83333333333,2016.91666666667,2017,2017.08333333333,2017.16666666667,2017.25,2017.33333333333,2017.41666666667,2017.5,2017.58333333333,2017.66666666667,2017.75,2017.83333333333,2017.91666666667,2018,2018.08333333333,2018.16666666667,2018.25,2018.33333333333,2018.41666666667,2018.5,2018.58333333333,2018.66666666667,2018.75,2018.83333333333,2018.91666666667],"y":[-0.590517635730384,-0.70447596281141,0.0329114665497183,-1.04371543906979,0.552011315264044,0.437891655953162,0.106768525103664,-0.602029456707276,-0.491136772552016,-0.0405071572700546,-0.793369469824938,-1.34486048715497,0.154671362207223,0.0797598767421572,0.755331345108331,0.970757657702803,-0.101840306285361,-0.0807152271645624,-0.0888340829048353,0.0574763276535979,0.51150415799399,-0.979422961281085,-0.136187349197289,1.02882864559635,-0.282220665966996,1.14266584253546,-0.722654654374374,-0.434650722083468,-0.472591816023529,-0.313897157713495,-0.427677410168839,-0.0961279064076184,-0.647493751085669,-0.251079868238355,0.78991528929391,-1.02882864559635,-0.266257334265465,0.296766744594427,0.833142786284311,0.766579932278884,-0.136582585138278,0.743832643356129,0,-0.137455913443715,0.333596593372175,0.0256800094092089,-0.521210691457574,0.113064242706384,0.168223353762878,-0.780568705591408,-1.34993318028672,-0.766579932278884,0.225697433024518,-0.830747240996098,0.189969907383141,0.271573627617279,1.29856877067936,1.01869385365976,-0.186538413546685,0.603958437653443,0.380254646469583,0.100925302355945,1.29500247807093,-0.246553373263739,-0.0666940408413943,0.1084228361232,0.46586743584697,-0.515572690771126,-2.29301758523742,-1.88499544230629,-1.0600419839355,-1.4587446733285,0.149747038928615,-1.35273979677685,-1.44358182539083,-1.03247304824459,-2.00953039373489,-1.04217800728855,-2.21554493724715,-0.640228505693768,-0.553112781512736,0.353967511914126,0,-0.312209488080015,-0.367753531919362,-0.694482098735301,0.825364868300992,0.138173735119134,0.916284660261526,0.355143965237728,0.495127480344649,0.161828924214751,-0.333808773413441,0.14010632673474,0.296323711772482,1.49125775128556,0.308422038997374,0.784546061631371,-0.533051651313302,0.264328301263395,1.2692571771886,-0.461440259629523,-0.734984587078124,-0.161828924214751,0.185002777265813,-0.810888774802482,-0.0966599961951591,-0.61207620944821,-1.30330344865025,0.258968914714383,-0.525164889123102,-1.25165377496213,-1.8913342709171,-0.539263978499655,-0.579732649552227,0.492631035997665,0.377656750129876,0.0651225139528684,-0.978734109460186,-1.53728580484443,-0.463192833644436,-1.26709479088962,-1.0365040307415,0.367791211809477,-0.681901738684916,-0.0909972093465008,-0.253410136732084,-2.35251536909568,-1.20307198763539,-0.549236217221315,-0.707056798586213,0.0828753833604692,0.807948177397812,-0.426791466528995,0,-0.542216269635572,0.353802354127023,-0.764555578680675,0.314666489185907,-0.140336072154941,-0.299807444626111,-0.224810086209276,0.455878927297596,-0.0412339846224921],"text":["x: 2007.000<br />y: -0.59051764","x: 2007.083<br />y: -0.70447596","x: 2007.167<br />y:  0.03291147","x: 2007.250<br />y: -1.04371544","x: 2007.333<br />y:  0.55201132","x: 2007.417<br />y:  0.43789166","x: 2007.500<br />y:  0.10676853","x: 2007.583<br />y: -0.60202946","x: 2007.667<br />y: -0.49113677","x: 2007.750<br />y: -0.04050716","x: 2007.833<br />y: -0.79336947","x: 2007.917<br />y: -1.34486049","x: 2008.000<br />y:  0.15467136","x: 2008.083<br />y:  0.07975988","x: 2008.167<br />y:  0.75533135","x: 2008.250<br />y:  0.97075766","x: 2008.333<br />y: -0.10184031","x: 2008.417<br />y: -0.08071523","x: 2008.500<br />y: -0.08883408","x: 2008.583<br />y:  0.05747633","x: 2008.667<br />y:  0.51150416","x: 2008.750<br />y: -0.97942296","x: 2008.833<br />y: -0.13618735","x: 2008.917<br />y:  1.02882865","x: 2009.000<br />y: -0.28222067","x: 2009.083<br />y:  1.14266584","x: 2009.167<br />y: -0.72265465","x: 2009.250<br />y: -0.43465072","x: 2009.333<br />y: -0.47259182","x: 2009.417<br />y: -0.31389716","x: 2009.500<br />y: -0.42767741","x: 2009.583<br />y: -0.09612791","x: 2009.667<br />y: -0.64749375","x: 2009.750<br />y: -0.25107987","x: 2009.833<br />y:  0.78991529","x: 2009.917<br />y: -1.02882865","x: 2010.000<br />y: -0.26625733","x: 2010.083<br />y:  0.29676674","x: 2010.167<br />y:  0.83314279","x: 2010.250<br />y:  0.76657993","x: 2010.333<br />y: -0.13658259","x: 2010.417<br />y:  0.74383264","x: 2010.500<br />y:  0.00000000","x: 2010.583<br />y: -0.13745591","x: 2010.667<br />y:  0.33359659","x: 2010.750<br />y:  0.02568001","x: 2010.833<br />y: -0.52121069","x: 2010.917<br />y:  0.11306424","x: 2011.000<br />y:  0.16822335","x: 2011.083<br />y: -0.78056871","x: 2011.167<br />y: -1.34993318","x: 2011.250<br />y: -0.76657993","x: 2011.333<br />y:  0.22569743","x: 2011.417<br />y: -0.83074724","x: 2011.500<br />y:  0.18996991","x: 2011.583<br />y:  0.27157363","x: 2011.667<br />y:  1.29856877","x: 2011.750<br />y:  1.01869385","x: 2011.833<br />y: -0.18653841","x: 2011.917<br />y:  0.60395844","x: 2012.000<br />y:  0.38025465","x: 2012.083<br />y:  0.10092530","x: 2012.167<br />y:  1.29500248","x: 2012.250<br />y: -0.24655337","x: 2012.333<br />y: -0.06669404","x: 2012.417<br />y:  0.10842284","x: 2012.500<br />y:  0.46586744","x: 2012.583<br />y: -0.51557269","x: 2012.667<br />y: -2.29301759","x: 2012.750<br />y: -1.88499544","x: 2012.833<br />y: -1.06004198","x: 2012.917<br />y: -1.45874467","x: 2013.000<br />y:  0.14974704","x: 2013.083<br />y: -1.35273980","x: 2013.167<br />y: -1.44358183","x: 2013.250<br />y: -1.03247305","x: 2013.333<br />y: -2.00953039","x: 2013.417<br />y: -1.04217801","x: 2013.500<br />y: -2.21554494","x: 2013.583<br />y: -0.64022851","x: 2013.667<br />y: -0.55311278","x: 2013.750<br />y:  0.35396751","x: 2013.833<br />y:  0.00000000","x: 2013.917<br />y: -0.31220949","x: 2014.000<br />y: -0.36775353","x: 2014.083<br />y: -0.69448210","x: 2014.167<br />y:  0.82536487","x: 2014.250<br />y:  0.13817374","x: 2014.333<br />y:  0.91628466","x: 2014.417<br />y:  0.35514397","x: 2014.500<br />y:  0.49512748","x: 2014.583<br />y:  0.16182892","x: 2014.667<br />y: -0.33380877","x: 2014.750<br />y:  0.14010633","x: 2014.833<br />y:  0.29632371","x: 2014.917<br />y:  1.49125775","x: 2015.000<br />y:  0.30842204","x: 2015.083<br />y:  0.78454606","x: 2015.167<br />y: -0.53305165","x: 2015.250<br />y:  0.26432830","x: 2015.333<br />y:  1.26925718","x: 2015.417<br />y: -0.46144026","x: 2015.500<br />y: -0.73498459","x: 2015.583<br />y: -0.16182892","x: 2015.667<br />y:  0.18500278","x: 2015.750<br />y: -0.81088877","x: 2015.833<br />y: -0.09666000","x: 2015.917<br />y: -0.61207621","x: 2016.000<br />y: -1.30330345","x: 2016.083<br />y:  0.25896891","x: 2016.167<br />y: -0.52516489","x: 2016.250<br />y: -1.25165377","x: 2016.333<br />y: -1.89133427","x: 2016.417<br />y: -0.53926398","x: 2016.500<br />y: -0.57973265","x: 2016.583<br />y:  0.49263104","x: 2016.667<br />y:  0.37765675","x: 2016.750<br />y:  0.06512251","x: 2016.833<br />y: -0.97873411","x: 2016.917<br />y: -1.53728580","x: 2017.000<br />y: -0.46319283","x: 2017.083<br />y: -1.26709479","x: 2017.167<br />y: -1.03650403","x: 2017.250<br />y:  0.36779121","x: 2017.333<br />y: -0.68190174","x: 2017.417<br />y: -0.09099721","x: 2017.500<br />y: -0.25341014","x: 2017.583<br />y: -2.35251537","x: 2017.667<br />y: -1.20307199","x: 2017.750<br />y: -0.54923622","x: 2017.833<br />y: -0.70705680","x: 2017.917<br />y:  0.08287538","x: 2018.000<br />y:  0.80794818","x: 2018.083<br />y: -0.42679147","x: 2018.167<br />y:  0.00000000","x: 2018.250<br />y: -0.54221627","x: 2018.333<br />y:  0.35380235","x: 2018.417<br />y: -0.76455558","x: 2018.500<br />y:  0.31466649","x: 2018.583<br />y: -0.14033607","x: 2018.667<br />y: -0.29980744","x: 2018.750<br />y: -0.22481009","x: 2018.833<br />y:  0.45587893","x: 2018.917<br />y: -0.04123398"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":40.1826484018265,"l":37.2602739726027},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"<b> Shoooting in New York 2006-2020, lag 12 <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[2006.40416666667,2019.5125],"tickmode":"array","ticktext":["2008","2010","2012","2014","2016","2018"],"tickvals":[2008,2010,2012,2014,2016,2018],"categoryorder":"array","categoryarray":["2008","2010","2012","2014","2016","2018"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"Time","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-2.54470402511474,1.68344640730462],"tickmode":"array","ticktext":["-2","-1","0","1"],"tickvals":[-2,-1,0,1],"categoryorder":"array","categoryarray":["-2","-1","0","1"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"train","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"62a47c7dccad":{"x":{},"y":{},"type":"scatter"}},"cur_data":"62a47c7dccad","visdat":{"62a47c7dccad":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<div id="htmlwidget-ea5d81cb46acf0394873" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-ea5d81cb46acf0394873">{"x":{"data":[{"x":[2007.08333333333,2007.16666666667,2007.25,2007.33333333333,2007.41666666667,2007.5,2007.58333333333,2007.66666666667,2007.75,2007.83333333333,2007.91666666667,2008,2008.08333333333,2008.16666666667,2008.25,2008.33333333333,2008.41666666667,2008.5,2008.58333333333,2008.66666666667,2008.75,2008.83333333333,2008.91666666667,2009,2009.08333333333,2009.16666666667,2009.25,2009.33333333333,2009.41666666667,2009.5,2009.58333333333,2009.66666666667,2009.75,2009.83333333333,2009.91666666667,2010,2010.08333333333,2010.16666666667,2010.25,2010.33333333333,2010.41666666667,2010.5,2010.58333333333,2010.66666666667,2010.75,2010.83333333333,2010.91666666667,2011,2011.08333333333,2011.16666666667,2011.25,2011.33333333333,2011.41666666667,2011.5,2011.58333333333,2011.66666666667,2011.75,2011.83333333333,2011.91666666667,2012,2012.08333333333,2012.16666666667,2012.25,2012.33333333333,2012.41666666667,2012.5,2012.58333333333,2012.66666666667,2012.75,2012.83333333333,2012.91666666667,2013,2013.08333333333,2013.16666666667,2013.25,2013.33333333333,2013.41666666667,2013.5,2013.58333333333,2013.66666666667,2013.75,2013.83333333333,2013.91666666667,2014,2014.08333333333,2014.16666666667,2014.25,2014.33333333333,2014.41666666667,2014.5,2014.58333333333,2014.66666666667,2014.75,2014.83333333333,2014.91666666667,2015,2015.08333333333,2015.16666666667,2015.25,2015.33333333333,2015.41666666667,2015.5,2015.58333333333,2015.66666666667,2015.75,2015.83333333333,2015.91666666667,2016,2016.08333333333,2016.16666666667,2016.25,2016.33333333333,2016.41666666667,2016.5,2016.58333333333,2016.66666666667,2016.75,2016.83333333333,2016.91666666667,2017,2017.08333333333,2017.16666666667,2017.25,2017.33333333333,2017.41666666667,2017.5,2017.58333333333,2017.66666666667,2017.75,2017.83333333333,2017.91666666667,2018,2018.08333333333,2018.16666666667,2018.25,2018.33333333333,2018.41666666667,2018.5,2018.58333333333,2018.66666666667,2018.75,2018.83333333333,2018.91666666667],"y":[-0.113958327081026,0.737387429361128,-1.07662690561951,1.59572675433383,-0.114119659310882,-0.331123130849498,-0.708797981810941,0.11089268415526,0.450629615281962,-0.752862312554884,-0.551491017330029,1.49953184936219,-0.0749114854650657,0.675571468366174,0.215426312594472,-1.07259796398816,0.0211250791207984,-0.00811885574027293,0.146310410558433,0.454027830340392,-1.49092711927507,0.843235612083795,1.16501599479364,-1.31104931156335,1.42488650850246,-1.86532049690984,0.288003932290906,-0.0379410939400611,0.158694658310035,-0.113780252455344,0.33154950376122,-0.551365844678051,0.396413882847314,1.04099515753227,-1.81874393489026,0.762571311330888,0.563024078859891,0.536376041689884,-0.0665628540054275,-0.903162517417162,0.880415228494407,-0.743832643356129,-0.137455913443715,0.471052506815889,-0.307916583962966,-0.546890700866783,0.634274934163958,0.0551591110564935,-0.948792059354286,-0.569364474695307,0.583353248007832,0.992277365303401,-1.05644467402062,1.02071714837924,0.0816037202341384,1.02699514306208,-0.279874917019601,-1.20523226720644,0.790496851200128,-0.22370379118386,-0.279329344113638,1.19407717571498,-1.54155585133467,0.179859332422344,0.175116876964594,0.35744459972377,-0.981440126618097,-1.7774448944663,0.408022142931134,0.824953458370789,-0.398702689393005,1.60849171225712,-1.50248683570546,-0.0908420286139835,0.411108777146246,-0.977057345490303,0.967352386446342,-1.1733669299586,1.57531643155338,0.0871157241810323,0.907080293426862,-0.353967511914126,-0.312209488080015,-0.0555440438393475,-0.326728566815938,1.51984696703629,-0.687191133181859,0.778110925142393,-0.561140695023798,0.139983515106922,-0.333298556129899,-0.495637697628192,0.473915100148181,0.156217385037742,1.19493403951308,-1.18283571228819,0.476124022633996,-1.31759771294467,0.797379952576698,1.0049288759252,-1.73069743681812,-0.273544327448601,0.573155662863373,0.346831701480564,-0.995891552068295,0.714228778607323,-0.515416213253051,-0.691227239202044,1.56227236336464,-0.784133803837485,-0.726488885839032,-0.639680495954961,1.35207029241744,-0.0404686710525723,1.07236368554989,-0.114974285867788,-0.312534236177008,-1.04385662341305,-0.55855169538424,1.07409297119999,-0.803901957245179,0.230590760148111,1.40429524255098,-1.04969295049439,0.590904529338415,-0.162412927385583,-2.09910523236359,1.14944338146029,0.653835770414075,-0.157820581364898,0.789932181946682,0.725072794037342,-1.23473964392681,0.426791466528995,-0.542216269635572,0.896018623762595,-1.1183579328077,1.07922206786658,-0.455002561340848,-0.15947137247117,0.0749973584168355,0.680689013506872,-0.497112911920088],"text":["x: 2007.083<br />y: -0.113958327","x: 2007.167<br />y:  0.737387429","x: 2007.250<br />y: -1.076626906","x: 2007.333<br />y:  1.595726754","x: 2007.417<br />y: -0.114119659","x: 2007.500<br />y: -0.331123131","x: 2007.583<br />y: -0.708797982","x: 2007.667<br />y:  0.110892684","x: 2007.750<br />y:  0.450629615","x: 2007.833<br />y: -0.752862313","x: 2007.917<br />y: -0.551491017","x: 2008.000<br />y:  1.499531849","x: 2008.083<br />y: -0.074911485","x: 2008.167<br />y:  0.675571468","x: 2008.250<br />y:  0.215426313","x: 2008.333<br />y: -1.072597964","x: 2008.417<br />y:  0.021125079","x: 2008.500<br />y: -0.008118856","x: 2008.583<br />y:  0.146310411","x: 2008.667<br />y:  0.454027830","x: 2008.750<br />y: -1.490927119","x: 2008.833<br />y:  0.843235612","x: 2008.917<br />y:  1.165015995","x: 2009.000<br />y: -1.311049312","x: 2009.083<br />y:  1.424886509","x: 2009.167<br />y: -1.865320497","x: 2009.250<br />y:  0.288003932","x: 2009.333<br />y: -0.037941094","x: 2009.417<br />y:  0.158694658","x: 2009.500<br />y: -0.113780252","x: 2009.583<br />y:  0.331549504","x: 2009.667<br />y: -0.551365845","x: 2009.750<br />y:  0.396413883","x: 2009.833<br />y:  1.040995158","x: 2009.917<br />y: -1.818743935","x: 2010.000<br />y:  0.762571311","x: 2010.083<br />y:  0.563024079","x: 2010.167<br />y:  0.536376042","x: 2010.250<br />y: -0.066562854","x: 2010.333<br />y: -0.903162517","x: 2010.417<br />y:  0.880415228","x: 2010.500<br />y: -0.743832643","x: 2010.583<br />y: -0.137455913","x: 2010.667<br />y:  0.471052507","x: 2010.750<br />y: -0.307916584","x: 2010.833<br />y: -0.546890701","x: 2010.917<br />y:  0.634274934","x: 2011.000<br />y:  0.055159111","x: 2011.083<br />y: -0.948792059","x: 2011.167<br />y: -0.569364475","x: 2011.250<br />y:  0.583353248","x: 2011.333<br />y:  0.992277365","x: 2011.417<br />y: -1.056444674","x: 2011.500<br />y:  1.020717148","x: 2011.583<br />y:  0.081603720","x: 2011.667<br />y:  1.026995143","x: 2011.750<br />y: -0.279874917","x: 2011.833<br />y: -1.205232267","x: 2011.917<br />y:  0.790496851","x: 2012.000<br />y: -0.223703791","x: 2012.083<br />y: -0.279329344","x: 2012.167<br />y:  1.194077176","x: 2012.250<br />y: -1.541555851","x: 2012.333<br />y:  0.179859332","x: 2012.417<br />y:  0.175116877","x: 2012.500<br />y:  0.357444600","x: 2012.583<br />y: -0.981440127","x: 2012.667<br />y: -1.777444894","x: 2012.750<br />y:  0.408022143","x: 2012.833<br />y:  0.824953458","x: 2012.917<br />y: -0.398702689","x: 2013.000<br />y:  1.608491712","x: 2013.083<br />y: -1.502486836","x: 2013.167<br />y: -0.090842029","x: 2013.250<br />y:  0.411108777","x: 2013.333<br />y: -0.977057345","x: 2013.417<br />y:  0.967352386","x: 2013.500<br />y: -1.173366930","x: 2013.583<br />y:  1.575316432","x: 2013.667<br />y:  0.087115724","x: 2013.750<br />y:  0.907080293","x: 2013.833<br />y: -0.353967512","x: 2013.917<br />y: -0.312209488","x: 2014.000<br />y: -0.055544044","x: 2014.083<br />y: -0.326728567","x: 2014.167<br />y:  1.519846967","x: 2014.250<br />y: -0.687191133","x: 2014.333<br />y:  0.778110925","x: 2014.417<br />y: -0.561140695","x: 2014.500<br />y:  0.139983515","x: 2014.583<br />y: -0.333298556","x: 2014.667<br />y: -0.495637698","x: 2014.750<br />y:  0.473915100","x: 2014.833<br />y:  0.156217385","x: 2014.917<br />y:  1.194934040","x: 2015.000<br />y: -1.182835712","x: 2015.083<br />y:  0.476124023","x: 2015.167<br />y: -1.317597713","x: 2015.250<br />y:  0.797379953","x: 2015.333<br />y:  1.004928876","x: 2015.417<br />y: -1.730697437","x: 2015.500<br />y: -0.273544327","x: 2015.583<br />y:  0.573155663","x: 2015.667<br />y:  0.346831701","x: 2015.750<br />y: -0.995891552","x: 2015.833<br />y:  0.714228779","x: 2015.917<br />y: -0.515416213","x: 2016.000<br />y: -0.691227239","x: 2016.083<br />y:  1.562272363","x: 2016.167<br />y: -0.784133804","x: 2016.250<br />y: -0.726488886","x: 2016.333<br />y: -0.639680496","x: 2016.417<br />y:  1.352070292","x: 2016.500<br />y: -0.040468671","x: 2016.583<br />y:  1.072363686","x: 2016.667<br />y: -0.114974286","x: 2016.750<br />y: -0.312534236","x: 2016.833<br />y: -1.043856623","x: 2016.917<br />y: -0.558551695","x: 2017.000<br />y:  1.074092971","x: 2017.083<br />y: -0.803901957","x: 2017.167<br />y:  0.230590760","x: 2017.250<br />y:  1.404295243","x: 2017.333<br />y: -1.049692950","x: 2017.417<br />y:  0.590904529","x: 2017.500<br />y: -0.162412927","x: 2017.583<br />y: -2.099105232","x: 2017.667<br />y:  1.149443381","x: 2017.750<br />y:  0.653835770","x: 2017.833<br />y: -0.157820581","x: 2017.917<br />y:  0.789932182","x: 2018.000<br />y:  0.725072794","x: 2018.083<br />y: -1.234739644","x: 2018.167<br />y:  0.426791467","x: 2018.250<br />y: -0.542216270","x: 2018.333<br />y:  0.896018624","x: 2018.417<br />y: -1.118357933","x: 2018.500<br />y:  1.079222068","x: 2018.583<br />y: -0.455002561","x: 2018.667<br />y: -0.159471372","x: 2018.750<br />y:  0.074997358","x: 2018.833<br />y:  0.680689014","x: 2018.917<br />y: -0.497112912"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":40.1826484018265,"l":37.2602739726027},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"<b> Shoooting in New York 2006-2020, lag 12, then lag 1 <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[2006.49166666667,2019.50833333333],"tickmode":"array","ticktext":["2008","2010","2012","2014","2016","2018"],"tickvals":[2008,2010,2012,2014,2016,2018],"categoryorder":"array","categoryarray":["2008","2010","2012","2014","2016","2018"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"Time","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-2.28448507959463,1.79387155948815],"tickmode":"array","ticktext":["-2","-1","0","1"],"tickvals":[-2,-1,0,1],"categoryorder":"array","categoryarray":["-2","-1","0","1"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"train","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"62a419e2b81e":{"x":{},"y":{},"type":"scatter"}},"cur_data":"62a419e2b81e","visdat":{"62a419e2b81e":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="model-selection" class="section level1">
<h1>Model selection</h1>
<p>First let us check the sample ACF, PACF of the series after transformation:</p>
<p><img src="model_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>The ACF plot, in non seasonality part (&lt; lag 8), we have significant lag 1 only, and the seasonality part have significant lag 12 and marginally significant lag 24, so the MA part could be MA1, and the SMA part should be 1 or 2.</p>
<p>The PACF plot, in non seasonality part (&lt; lag 8), the lag tails off, and for the seasonality part, also we can observe the lag spike tails off, (or it’s the first 2 significant). So the AR part should be 0 and the SAR part can be 0 or 2.</p>
<p>So the most probable candidate models should be <span class="math inline">\(SARIMA(p,1,q)(P,1,Q)_{12}\)</span> with <span class="math inline">\(p=0\)</span>, <span class="math inline">\(q = 1,2\)</span>, <span class="math inline">\(P = 0, 2\)</span>, <span class="math inline">\(Q = 1,2\)</span>.</p>
<p>We fit those models and calculate the AICc of those models fitted by R. The result is:</p>
<table>
<caption>AICCs of the models</caption>
<thead>
<tr class="header">
<th align="left">Model</th>
<th align="right">AICc</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">SARIMA(0,1,1)(0,1,1)_12</td>
<td align="right">262.6220</td>
</tr>
<tr class="even">
<td align="left">SARIMA(0,1,1)(0,1,2)_12</td>
<td align="right">264.0517</td>
</tr>
<tr class="odd">
<td align="left">SARIMA(0,1,1)(2,1,1)_12</td>
<td align="right">265.7343</td>
</tr>
<tr class="even">
<td align="left">SARIMA(0,1,1)(2,1,2)_12</td>
<td align="right">268.0756</td>
</tr>
<tr class="odd">
<td align="left">SARIMA(0,1,2)(0,1,1)_12</td>
<td align="right">264.6530</td>
</tr>
<tr class="even">
<td align="left">SARIMA(0,1,2)(0,1,2)_12</td>
<td align="right">265.9070</td>
</tr>
<tr class="odd">
<td align="left">SARIMA(0,1,2)(2,1,1)_12</td>
<td align="right">267.5682</td>
</tr>
<tr class="even">
<td align="left">SARIMA(0,1,2)(2,1,2)_12</td>
<td align="right">269.7245</td>
</tr>
</tbody>
</table>
<p>From the table, the model <span class="math inline">\(SARIMA(0,1,1)(0,1,1)_{12}\)</span> has the smallest AICc so it’s the best. The model summary is:</p>
<pre><code>## Series: train1 
## ARIMA(0,1,1)(0,1,1)[12] 
## 
## Coefficients:
##           ma1     sma1
##       -0.7592  -0.8463
## s.e.   0.0629   0.0917
## 
## sigma^2 estimated as 0.3194:  log likelihood=-128.22
## AIC=262.45   AICc=262.62   BIC=271.34
## 
## Training set error measures:
##                       ME      RMSE       MAE        MPE     MAPE      MASE
## Training set -0.01589969 0.5372774 0.4100619 -0.3197275 4.304198 0.6802193
##                   ACF1
## Training set 0.0195208</code></pre>
<p>And the mathematical form is: (After box cox transformation with lambda = 0.263)</p>
<p><span class="math display">\[
(1-B)(1-B^{12})X_n=(1-0.7592B)(1-0.8463B^{12})Z_n
\]</span></p>
<p><span class="math display">\[ Z_n \overset{iid}\sim N[0,0.3194]\]</span></p>
</div>
<div id="model-diagnostic" class="section level1">
<h1>Model diagnostic</h1>
<p>First we check the ACF and PACF of the residual. The residual should assemble white noise so the AFC and PACF should not contain any significant spikes. From the ACF and PACF plot, except lag4 is marginally significant, all others are good, so we think the residual is similar to white noise for the ACF and PACF.</p>
<p><img src="model_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>From the result, except for the lag 14 very marginally spike of the ACF and PACF (Which may because some complex patterns in the data), all other lags are insignificant, so we can believe the ACF and PACF of the residual is quite similar to the white noise.</p>
<p>Then check the inverse polynomial roots. The characteristic roots should be outside the unit circle to assure the model stationary and invertible, thus the inverse characteristic roots should be inside the unit circle. From the plot below all the inverse characteristic roots are inside the unit circle. so the model is legible.</p>
<p><img src="model_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>Next we check the model residual independence:</p>
<p>Use Box - Pierce test, Ljung - Box test and McLeod - Li test. The training data have 156 observations, model parameters 2, so the degree of freedom should be 12, 12, 14 respectively.</p>
<table>
<thead>
<tr class="header">
<th align="left">tests</th>
<th align="right">p.value</th>
<th align="right">df</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Box-Pierce</td>
<td align="right">0.2836037</td>
<td align="right">12</td>
</tr>
<tr class="even">
<td align="left">Ljung-Box</td>
<td align="right">0.2311293</td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="left">McLeod-Li</td>
<td align="right">0.9971713</td>
<td align="right">14</td>
</tr>
</tbody>
</table>
<p>All of the independence tests pass with p value &gt; 0.05, so our residual does not have any sequential correlation.</p>
</div>
<div id="forecast" class="section level1">
<h1>Forecast</h1>
<p>Now we forecast the model on the test set:</p>
<p><img src="model_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>The forecast result shows that in 2019, all blue points (real values) are inside the 95% confidence interval, and actually quite close to the predicted red points. But in 2020, nearly all predicted value are smaller than the actual value, and in summer the actual value is much higher than the predicted ones.</p>
<p>This is because after April the COVID outbreaks in US. The economy was greatly suffered so the social become violent thus much more shooting occurs. Our SARIMA model can’t take that COVID event into consideration, and still predict it as the COVID does not exist, so that’s why our predicted values are much smaller than the actual values. In fact, no model can forecast those black swarm events.</p>
<p>Also from the disparity of the predicted and actual shooting numers in 2020, we can have a feeling of how big influence that COVID bring to US.</p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
