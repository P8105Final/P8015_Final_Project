<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Data</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/lumen.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="Data-Preparation.html">Data Preparation</a>
</li>
<li>
  <a href="analysis.html">Descriptive Analysis</a>
</li>
<li>
  <a href="ModelAnalysis2.html">Statistical Analysis</a>
</li>
<li>
  <a href="model.html">Regression Model</a>
</li>
<li>
  <a href="https://ym2813.shinyapps.io/interactive_map_p8105_final/">Interactive Map</a>
</li>
<li>
  <a href="report.html">Report</a>
</li>
<li>
  <a href="https://www.youtube.com/">
    <span class="fa fa-youtube fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/P8105Final/P8015_Final_Project">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Data</h1>

</div>


<div id="data-sources" class="section level2">
<h2>Data Sources</h2>
<p>For this project, we acquired data from multiple source.</p>
<ul>
<li>For the shooting incident data:</li>
</ul>
<p><a href="https://data.cityofnewyork.us/Public-Safety/NYPD-Shooting-Incident-Data-Historic-/833y-fsy8">NYPD Shooting Incident Data (Historic)</a></p>
<p>This data set contains 23,575 shooting incidents that occurred during January 01, 2016 to December 31, 2020. The data set was originally provided by the Police Department (NYPD). For each incident, information on the incident date, time, location (specific to the longitude and latitude of the incident), the perpetrator and the victim’s sex, race, and age group were provided.</p>
<ul>
<li>For Unemployment Rate</li>
</ul>
<p><a href="https://fred.stlouisfed.org/series/NYUR">Unemployment Rate</a></p>
<p>We downloaded the monthly unemployment rate in New York City from January ,2010 to December, 2020 from FRED, <a href="https://fred.stlouisfed.org/series/NYUR">Federal Reserve Bank of St. Louis</a>. The original source of the data is <a href="https://www.bls.gov/sae/">U.S. Bureau of Labor Statistics</a>.</p>
<ul>
<li>For Educational Attainment</li>
</ul>
<p><a href="https://data.census.gov/cedsci/table?q=Educational%20Attainment&amp;g=0500000US36005,36047,36061,36081,36085&amp;tid=ACSST1Y2019.S1501&amp;moe=false&amp;tp=false">Educational Attainment</a></p>
<p>The source of our educational attainment data is <a href="https://data.census.gov/cedsci/">U.S Census Bureau</a>. We searched for educational attainment and acquired our data from table S1501. In the table, we filtered data by year and location. Namely, we filtered the educational attainment information for the five boroughs in NYC from 2010 to 2020.</p>
<p><a href="https://github.com/nychealth/coronavirus-data/tree/master/trends">Covid-19 Cases</a></p>
<p>This data set contains the citywide and borough-specific daily counts of COVID-19 cases from February 29, 2020 to December 05, 2020. The data set starts from February 29,2020 because it is the date that the Health Department classifies as the start of the COVID-19 outbreak in NYC. The source of this date is the NYC Department of Health and Mental Hygiene.</p>
</div>
<div id="data-cleaning-and-tidying" class="section level2">
<h2>Data Cleaning and Tidying</h2>
<ol style="list-style-type: decimal">
<li>Shooting Incident Data</li>
</ol>
<p>The main data set we used is the Shooting Incident Data. After downloading our data, we cleaned the data by renamed a few variable with reasonable names, re-coded some variables to present clear information, and wrote out a csv file with the cleaned data as the resulting data set that we will be using in the project.</p>
<pre class="r"><code>data_hist = 
  read_csv(&quot;data/NYPD_Shooting_Incident_Data__Historic_.csv&quot;) %&gt;%
  janitor::clean_names() %&gt;%
  rename(&quot;date&quot; = &quot;occur_date&quot;,
         &quot;time&quot; = &quot;occur_time&quot;) %&gt;%
  separate(date, into = c(&quot;month&quot;, &quot;day&quot;, &quot;year&quot;), sep = &quot;/&quot;) %&gt;%
  separate(time, into = c(&quot;hour&quot;, &quot;minute&quot;), sep = &quot;:&quot;) %&gt;% 
  mutate(
          boro = str_to_lower(boro),
          location_desc = str_to_lower(location_desc),
          perp_race = str_to_lower(perp_race),
          vic_race = str_to_lower(vic_race),
          perp_age_group = str_replace(perp_age_group, &quot;UNKNOWN&quot;,&quot;unknown&quot;),
          perp_sex = recode(perp_sex, &quot;M&quot; = &quot;male&quot;,&quot;F&quot; = &quot;female&quot;,&quot;U&quot; = &quot;unknown&quot;), 
          vic_sex = recode(vic_sex, &quot;M&quot; = &quot;male&quot;,&quot;F&quot; = &quot;female&quot;,&quot;U&quot; = &quot;unknown&quot;),
          jurisdiction_code = case_when(
            jurisdiction_code == 0 ~ &quot;patrol&quot;, 
            jurisdiction_code == 1 ~ &quot;transit&quot;,
            jurisdiction_code == 2 ~ &quot;housing&quot;)
          ) %&gt;% 
  arrange(year,month,day,hour,minute)

write.csv(data_hist, &quot;.\\data\\NYPD_Shooting_Incident_Data_Clean.csv&quot;, row.names=FALSE)</code></pre>
<p>data_hist = replace(data_hist, is.na(data_hist),“unknown”)</p>
<ol start="2" style="list-style-type: decimal">
<li>Unemployment Rate Data</li>
</ol>
<p>We initially found data from the <a href="https://dol.ny.gov/labor-statistics-new-york-city-region">Nee York State Department of Labor</a> and cleaned it for a resulting data set. However, this set only contains data from 2015 to 2020.</p>
<pre class="r"><code>library(readxl)

path = &quot;data/unemployment/borough_labor_force.xlsx&quot;

unemployment_df = bind_rows(path %&gt;% 
  excel_sheets() %&gt;% 
  set_names() %&gt;% 
  map(read_excel, path = path)) %&gt;% 
  janitor::clean_names() %&gt;% 
  drop_na() %&gt;%
  subset(month != &quot;Avg&quot;) %&gt;% 
  rename(&quot;boro&quot; = &quot;area&quot;,&quot;unemployment_rate&quot; =&quot;unemployment_percent&quot;) %&gt;% 
  mutate( boro = case_when(
    str_starts(boro,&quot;B&quot;) ~ &quot;bronx&quot;,
    str_starts(boro,&quot;K&quot;) ~ &quot;brooklyn&quot;,
    str_starts(boro,&quot;Q&quot;) ~ &quot;queens&quot;,
    str_starts(boro,&quot;R&quot;) ~ &quot;staten island&quot;,
    str_starts(boro,&quot;N&quot;) ~ &quot;manhattan&quot;),
    month = str_to_lower(month),
    unemployment_rate = round(unemployment_rate/100,3)
    )

write.csv(unemployment_df, &quot;data/unemployment/unemployment_cleaned.csv&quot;)</code></pre>
<p>Therefore, we went back and looked for another source. Eventually, we used data from the<a href="https://fred.stlouisfed.org/series/NYUR">Federal Reserve Bank of St. Louis</a>, which was a pretty cleaned data set to start with. We also wrote out a resulting csv file for our use in the project as well.</p>
<pre class="r"><code>unemployed_complete= read_csv(&quot;data/unemployment/NYUR.csv&quot;) %&gt;% 
  janitor::clean_names() %&gt;% 
  separate(date, into = c(&quot;year&quot;, &quot;month&quot;, &quot;date&quot;), sep = &quot;-&quot;) %&gt;% 
  rename(&quot;unemployment_rate&quot; = &quot;nyur&quot;) %&gt;% 
  mutate(unemployment_rate = round(unemployment_rate/100,3)) %&gt;% 
  select(-date)

write.csv(unemployed_complete, &quot;data/unemployment/unemployed_complete.csv&quot;)</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Educational Attainment Data</li>
</ol>
<p>We obtained our educational attainment data by searching for in the S1501 table of the U.S. census, setting the geography label to the five boroughs of NYC and the year filters from 2010 to 2020.</p>
<pre class="r"><code>education_df = read_csv(&quot;data/education/educational_attainment.csv&quot;) %&gt;% mutate(year = as.character(year)) %&gt;% rename(&quot;edu&quot; = &quot;percent&quot;)</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>COVID-19 Data</li>
</ol>
<p>For the COVID-19 data set, we performed a similar process. We selected the variables of interest, cleaned and tidy the data set. Then, we wrote out a resulting csv file for the use of our project as well.</p>
<pre class="r"><code>covid_df = read_csv(&quot;data/covid/cases-by-day.csv&quot;) %&gt;%
  janitor::clean_names() %&gt;% 
  select(1,2,6,10,14,18,22) %&gt;% 
  rename(&quot;date&quot; = &quot;date_of_interest&quot;,
        &quot;total_case&quot; = &quot;case_count&quot;) %&gt;% 
  separate(date, into = c(&quot;month&quot;, &quot;day&quot;, &quot;year&quot;), sep = &quot;/&quot;) %&gt;% 
  pivot_longer(
    cols = 5:9,
    names_to = &quot;boro&quot;,
    values_to = &quot;boro_case&quot;) %&gt;%
  mutate(
    boro = case_when(
      str_starts(boro, &quot;bx&quot;) ~ &quot;bronx&quot;,
      str_starts(boro, &quot;bk&quot;) ~ &quot;brooklyn&quot;,
      str_starts(boro, &quot;mn&quot;) ~ &quot;manhattan&quot;,
      str_starts(boro, &quot;qn&quot;) ~ &quot;queens&quot;,
      str_starts(boro, &quot;si&quot;) ~ &quot;staten island&quot;
    )
  )

write.csv(covid_df, &quot;data/covid/covid_cleaned.csv&quot;)</code></pre>
</div>
<div id="data-description" class="section level2">
<h2>Data description</h2>
<p><strong>Shooting Incident Data</strong></p>
<p>The cleaned resulting data set contains 23,585 incidents and 22 variables. Some of the variables that we are interested in are:</p>
<ul>
<li><code>year</code> Year of the incident</li>
<li><code>month</code> Month of the incident</li>
<li><code>day</code> Day of the incident</li>
<li><code>hour</code> Time(hour) of the incident</li>
<li><code>boro</code> The borough where the incident happens</li>
<li><code>statistical_murder_flag</code> the outcome of the incident. TRUE means that the victim dies from the shooting, and FALSE means the opposite</li>
<li><code>perp_age_group</code> Perpetrator’s age group</li>
<li><code>perp_sex</code> Perpetrator’s sex</li>
<li><code>perp_race</code>Perpetrator’s race</li>
<li><code>latitude</code> Latitude of the incident</li>
<li><code>longitude</code> Longitude of the incident.</li>
</ul>
<p><strong>Other Data</strong></p>
<p>We used the <code>unemployment rate</code>, <code>educational attainment</code>, and <code>COVID-19</code> data to analyze whether those variables have an association with the shooting incident.</p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
